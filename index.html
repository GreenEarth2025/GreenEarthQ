<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Simple Bills & Expenses Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  :root{--bg:#0b0f14;--panel:#121823;--row:#1c2533;--text:#e6edf3;--muted:#a9b3c1;--accent:#67d4ff;--danger:#ff7676;}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:var(--text)}
  header{padding:16px 20px;border-bottom:1px solid #1b2432;background:var(--panel)}
  h1{margin:0;font-size:20px}
  main{padding:16px 20px;max-width:1000px;margin:0 auto}
  .controls{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-bottom:12px}
  select,input[type="date"],input[type="number"],input[type="text"],button{
    background:#0f1622;border:1px solid #233044;color:var(--text);padding:6px 8px;border-radius:6px}
  button{cursor:pointer}
  button.primary{background:#103546;border-color:#1f566e;color:#cfefff}
  button.danger{background:#331b1b;border-color:#5c2424;color:#ffdede}
  table{width:100%;border-collapse:collapse}
  th,td{border:1px solid #2a3647;padding:6px 8px;text-align:left;vertical-align:middle}
  th{background:var(--panel);position:sticky;top:0;z-index:1}
  tbody tr:nth-child(even){background:var(--row)}
  td.actions{white-space:nowrap}
  td[contenteditable="true"]{outline:none}
  td[contenteditable="true"]:focus{box-shadow:inset 0 0 0 2px #2b6cb0}
  .summary{display:flex;gap:16px;flex-wrap:wrap;color:var(--muted);margin:10px 0 16px}
  .summary .pill{background:#0f1622;border:1px solid #233044;padding:6px 10px;border-radius:999px}
  .add-row{display:grid;grid-template-columns:80px 1.5fr 110px 150px 90px 75px 150px 130px 1.4fr 120px;gap:6px;margin:12px 0}
  .hint{color:var(--muted);font-size:12px;margin-top:6px}
  .right{text-align:right}
  .center{text-align:center}
  .muted{color:var(--muted)}
</style>
</head>
<body>
  <header>
    <h1>Mopuri Family Bills & Expenses (Simple, Local Only)</h1>
  </header>

  <main>
    <div class="controls">
      <label>Quarter:
        <select id="filterQuarter">
          <option value="ALL">All</option>
          <option value="Q1">Q1</option>
          <option value="Q2">Q2</option>
          <option value="Q3">Q3</option>
          <option value="Q4">Q4</option>
        </select>
      </label>
      <label>Show:
        <select id="filterPaid">
          <option value="ALL">All</option>
          <option value="UNPAID">Unpaid</option>
          <option value="PAID">Paid</option>
        </select>
      </label>
      <button class="primary" id="btnExport">Export JSON</button>
      <button id="btnImport">Import JSON</button>
      <button class="danger" id="btnReset">Reset to Demo</button>
    </div>

    <div class="summary" id="summary"></div>

    <table>
      <thead>
        <tr>
          <th>Quarter</th>
          <th>Bill</th>
          <th class="right">Amount</th>
          <th>Due date</th>
          <th class="center">Required</th>
          <th class="center">Paid</th>
          <th>Paid date</th>
          <th>Paid by</th>
          <th>Notes</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>

    <!-- Add Bill form moved here -->
    <div class="add-row">
      <select id="addQuarter">
        <option value="AUTO">Auto from date</option>
        <option value="Q1">Q1</option>
        <option value="Q2">Q2</option>
        <option value="Q3">Q3</option>
        <option value="Q4">Q4</option>
      </select>
      <input type="text" id="addName" placeholder="Bill/Expense name" />
      <input type="number" id="addAmt" placeholder="Amount" step="0.01" />
      <input type="date" id="addDue" />
      <select id="addReq">
        <option value="true">Required</option>
        <option value="false">Optional</option>
      </select>
      <select id="addPaid">
        <option value="false">Unpaid</option>
        <option value="true">Paid</option>
      </select>
      <input type="date" id="addPaidDate" />
      <input type="text" id="addPaidBy" placeholder="Paid by (name)" />
      <input type="text" id="addNotes" placeholder="Notes" />
      <button class="primary" id="btnAdd">âž• Add Bill</button>
    </div>
    <div class="hint">Tip: You can click most cells to edit directly. Changes save automatically.</div>

    <div class="hint muted">Your data is saved in this browser (localStorage). No internet or account needed.</div>
  </main>

<script>
  const KEY = 'mopuri-simple-tracker-v2';
  let items = [];

  function quarterFromDate(dateStr){
    if(!dateStr) return 'Q1';
    const m = new Date(dateStr + 'T00:00:00').getMonth() + 1;
    if(m>=1 && m<=3) return 'Q3';
    if(m>=4 && m<=6) return 'Q4';
    if(m>=7 && m<=9) return 'Q1';
    return 'Q2';
  }

  function seedData(){
    return [
      {q:'Q1', name:'Rent', amt:2300, due:'2025-07-01', req:true, paid:true, paidDate:'2025-07-01', paidBy:'Prakash', notes:''},
      {q:'Q1', name:'Electricity', amt:210.50, due:'2025-07-25', req:true, paid:false, paidDate:'', paidBy:'', notes:'ActewAGL'},
      {q:'Q1', name:'Water', amt:95.30, due:'2025-08-05', req:true, paid:false, paidDate:'', paidBy:'', notes:''},
      {q:'Q2', name:'Gas', amt:140.00, due:'2025-10-18', req:true, paid:true, paidDate:'2025-10-18', paidBy:'Partner', notes:''},
      {q:'Q2', name:'Council Rates', amt:550.00, due:'2025-11-15', req:true, paid:false, paidDate:'', paidBy:'', notes:'ACT Rates'},
      {q:'Q3', name:'Car Insurance', amt:780.00, due:'2026-02-14', req:true, paid:false, paidDate:'', paidBy:'', notes:'Comprehensive'},
      {q:'Q3', name:'Childcare Fees', amt:420.00, due:'2026-02-07', req:true, paid:false, paidDate:'', paidBy:'', notes:''},
      {q:'Q4', name:'Strata', amt:760.00, due:'2026-05-20', req:true, paid:false, paidDate:'', paidBy:'', notes:''},
      {q:'Q4', name:'Health Insurance', amt:265.00, due:'2026-06-02', req:true, paid:true, paidDate:'2026-06-02', paidBy:'Prakash', notes:''},
      {q:'Q4', name:'Amazon
